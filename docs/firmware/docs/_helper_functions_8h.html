<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ADI iSensor FX3 Firmware: C:/Users/anolan3/Documents/iSensor-FX3-API/firmware/FX3_Firmware/HelperFunctions.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Analog-Devices-Logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ADI iSensor FX3 Firmware
   &#160;<span id="projectnumber">v2.9.2-pub</span>
   </div>
   <div id="projectbrief">Firmware for the Analog Devices EVAL-ADIS-FX3 IMU Evaluation Platform. This firmware can be compiled using the Cypress EZ USB Suite IDE</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a6f5bf3126ac94fe2cad71d1f6aa3d6b.html">FX3_Firmware</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">HelperFunctions.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for a set of general purpose iSensor FX3 helper functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
</div>
<p><a href="_helper_functions_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aed2da54ac9e8665a3674c9f74bfe2ec3"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="_helper_functions_8h.html#ad59527647b27d713cbb6009f201e0cd6">DutVoltage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_helper_functions_8h.html#aed2da54ac9e8665a3674c9f74bfe2ec3">DutVoltage</a></td></tr>
<tr class="separator:aed2da54ac9e8665a3674c9f74bfe2ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ad59527647b27d713cbb6009f201e0cd6"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_helper_functions_8h.html#ad59527647b27d713cbb6009f201e0cd6">DutVoltage</a> { <a class="el" href="_helper_functions_8h.html#ad59527647b27d713cbb6009f201e0cd6ad8a892b94d3a94ea861543c085ae782b">Off</a> = 0, 
<a class="el" href="_helper_functions_8h.html#ad59527647b27d713cbb6009f201e0cd6a02fefc5f3fc06b24108fcfd11587bc78">On3_3Volts</a> = 1, 
<a class="el" href="_helper_functions_8h.html#ad59527647b27d713cbb6009f201e0cd6ab158ace6d37432a16f8c71d3004b21d8">On5_0Volts</a> = 2
 }</td></tr>
<tr class="separator:ad59527647b27d713cbb6009f201e0cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a324389c2f4332af32ea49f7b0f4741e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_helper_functions_8h.html#a324389c2f4332af32ea49f7b0f4741e2">AdiConfigureWatchdog</a> ()</td></tr>
<tr class="memdesc:a324389c2f4332af32ea49f7b0f4741e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the FX3 watchdog timer based on the current board state.  <a href="_helper_functions_8h.html#a324389c2f4332af32ea49f7b0f4741e2">More...</a><br /></td></tr>
<tr class="separator:a324389c2f4332af32ea49f7b0f4741e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbef4a5a3f1c49fde1046e1cd1de4089"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_helper_functions_8h.html#afbef4a5a3f1c49fde1046e1cd1de4089">AdiGetBuildDate</a> (uint8_t *outBuf)</td></tr>
<tr class="memdesc:afbef4a5a3f1c49fde1046e1cd1de4089"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the firmware build date, followed by the build time.  <a href="_helper_functions_8h.html#afbef4a5a3f1c49fde1046e1cd1de4089">More...</a><br /></td></tr>
<tr class="separator:afbef4a5a3f1c49fde1046e1cd1de4089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2fad3b6760da6ae249c937cc50e9a20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_helper_functions_8h.html#aa2fad3b6760da6ae249c937cc50e9a20">AdiSendStatus</a> (uint32_t status, uint16_t count, CyBool_t isControlEndpoint)</td></tr>
<tr class="memdesc:aa2fad3b6760da6ae249c937cc50e9a20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends status back to PC over control endpoint or manual bulk in endpoint.  <a href="_helper_functions_8h.html#aa2fad3b6760da6ae249c937cc50e9a20">More...</a><br /></td></tr>
<tr class="separator:aa2fad3b6760da6ae249c937cc50e9a20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee5cedbbf5f529f17f4b504b6f7937c"><td class="memItemLeft" align="right" valign="top">CyU3PReturnStatus_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_helper_functions_8h.html#abee5cedbbf5f529f17f4b504b6f7937c">AdiSetDutSupply</a> (<a class="el" href="_helper_functions_8h.html#ad59527647b27d713cbb6009f201e0cd6">DutVoltage</a> SupplyMode)</td></tr>
<tr class="memdesc:abee5cedbbf5f529f17f4b504b6f7937c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function configures the DUT supply voltage.  <a href="_helper_functions_8h.html#abee5cedbbf5f529f17f4b504b6f7937c">More...</a><br /></td></tr>
<tr class="separator:abee5cedbbf5f529f17f4b504b6f7937c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4191f362f953cee5a7ad6170349760c0"><td class="memItemLeft" align="right" valign="top">CyU3PReturnStatus_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_helper_functions_8h.html#a4191f362f953cee5a7ad6170349760c0">AdiSleepForMicroSeconds</a> (uint32_t numMicroSeconds)</td></tr>
<tr class="memdesc:a4191f362f953cee5a7ad6170349760c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function blocks thread execution for a specified number of microseconds.  <a href="_helper_functions_8h.html#a4191f362f953cee5a7ad6170349760c0">More...</a><br /></td></tr>
<tr class="separator:a4191f362f953cee5a7ad6170349760c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5e62a753e1f2ca61c308c36e87b8ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_helper_functions_8h.html#aea5e62a753e1f2ca61c308c36e87b8ae">AdiReturnBulkEndpointData</a> (CyU3PReturnStatus_t status, uint16_t length)</td></tr>
<tr class="memdesc:aea5e62a753e1f2ca61c308c36e87b8ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a function result to the PC via the ChannelToPC endpoint.  <a href="_helper_functions_8h.html#aea5e62a753e1f2ca61c308c36e87b8ae">More...</a><br /></td></tr>
<tr class="separator:aea5e62a753e1f2ca61c308c36e87b8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for a set of general purpose iSensor FX3 helper functions. </p>
<p>Copyright (c) Analog Devices Inc, 2018 - 2020 All Rights Reserved.</p>
<p>THIS SOFTWARE UTILIZES LIBRARIES DEVELOPED AND MAINTAINED BY CYPRESS INC. THE LICENSE INCLUDED IN THIS REPOSITORY DOES NOT EXTEND TO CYPRESS PROPERTY.</p>
<p>Use of this file is governed by the license agreement included in this repository.</p>
<dl class="section date"><dt>Date</dt><dd>6/17/2020 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>A. Nolan (<a href="#" onclick="location.href='mai'+'lto:'+'ale'+'x.'+'nol'+'an'+'@an'+'al'+'og.'+'co'+'m'; return false;">alex.<span style="display: none;">.nosp@m.</span>nola<span style="display: none;">.nosp@m.</span>n@ana<span style="display: none;">.nosp@m.</span>log.<span style="display: none;">.nosp@m.</span>com</a>) </dd></dl>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="aed2da54ac9e8665a3674c9f74bfe2ec3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed2da54ac9e8665a3674c9f74bfe2ec3">&#9670;&nbsp;</a></span>DutVoltage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="_helper_functions_8h.html#ad59527647b27d713cbb6009f201e0cd6">DutVoltage</a> <a class="el" href="_helper_functions_8h.html#ad59527647b27d713cbb6009f201e0cd6">DutVoltage</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enum of possible DUT supply voltages </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ad59527647b27d713cbb6009f201e0cd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad59527647b27d713cbb6009f201e0cd6">&#9670;&nbsp;</a></span>DutVoltage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_helper_functions_8h.html#ad59527647b27d713cbb6009f201e0cd6">DutVoltage</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enum of possible DUT supply voltages </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad59527647b27d713cbb6009f201e0cd6ad8a892b94d3a94ea861543c085ae782b"></a>Off&#160;</td><td class="fielddoc"><p>DUT supply off </p>
</td></tr>
<tr><td class="fieldname"><a id="ad59527647b27d713cbb6009f201e0cd6a02fefc5f3fc06b24108fcfd11587bc78"></a>On3_3Volts&#160;</td><td class="fielddoc"><p>DUT supply on, at 3.3V regulated output </p>
</td></tr>
<tr><td class="fieldname"><a id="ad59527647b27d713cbb6009f201e0cd6ab158ace6d37432a16f8c71d3004b21d8"></a>On5_0Volts&#160;</td><td class="fielddoc"><p>DUT supply on, at 5V USB output </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a324389c2f4332af32ea49f7b0f4741e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a324389c2f4332af32ea49f7b0f4741e2">&#9670;&nbsp;</a></span>AdiConfigureWatchdog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AdiConfigureWatchdog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the FX3 watchdog timer based on the current board state. </p>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>The watchdog is cleared by a software timer managed in the threadX RTOS. The clear interval is set to 5 seconds less than the watchdog period. If the watchdog timer elapses without being reset (software is locked up) then the FX3 firmware undergoes a hard reset and will reboot onto the second stage bootloader. This will cause an UnexpectedReset event to be raised in the running instance of the FX3Connection (if the FX3 board is connected). </p>

</div>
</div>
<a id="afbef4a5a3f1c49fde1046e1cd1de4089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbef4a5a3f1c49fde1046e1cd1de4089">&#9670;&nbsp;</a></span>AdiGetBuildDate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AdiGetBuildDate </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>outBuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the firmware build date, followed by the build time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">outBuf</td><td>Char array which build date/time is placed into</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a id="aea5e62a753e1f2ca61c308c36e87b8ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea5e62a753e1f2ca61c308c36e87b8ae">&#9670;&nbsp;</a></span>AdiReturnBulkEndpointData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AdiReturnBulkEndpointData </td>
          <td>(</td>
          <td class="paramtype">CyU3PReturnStatus_t&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a function result to the PC via the ChannelToPC endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td>The status code to place in the BulkEndpointBuffer (0 - 3)</td></tr>
    <tr><td class="paramname">length</td><td>The number of bytes to send to the PC over the bulk endpoint</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This function is used to allow early returns out of long functions in the case where an invalid setting or operation is detected. Once this function is called, and the result sent to the PC, the function can be safely exited. </p>

</div>
</div>
<a id="aa2fad3b6760da6ae249c937cc50e9a20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2fad3b6760da6ae249c937cc50e9a20">&#9670;&nbsp;</a></span>AdiSendStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AdiSendStatus </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CyBool_t&#160;</td>
          <td class="paramname"><em>isControlEndpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends status back to PC over control endpoint or manual bulk in endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td>The status code to send back. Is placed in USBBuffer[0-3]</td></tr>
    <tr><td class="paramname">count</td><td>The number of bytes to send. Must be at least 4</td></tr>
    <tr><td class="paramname">isControlEndpoint</td><td>Bool indicating if data should be sent over control endpoint or bulk endpoint</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This function will overwrite the data in USBBuffer[0-3]. If you need to send extra data along with the status, it must be placed starting at USBBuffer[4]. </p>

</div>
</div>
<a id="abee5cedbbf5f529f17f4b504b6f7937c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee5cedbbf5f529f17f4b504b6f7937c">&#9670;&nbsp;</a></span>AdiSetDutSupply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CyU3PReturnStatus_t AdiSetDutSupply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_helper_functions_8h.html#ad59527647b27d713cbb6009f201e0cd6">DutVoltage</a>&#160;</td>
          <td class="paramname"><em>SupplyMode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function configures the DUT supply voltage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SupplyMode</td><td>The DUT Voltage to set (Off, 3.3V, 5V)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A status code indicating the success of the functions.</dd></dl>
<p>This function sets the control pins on the LTC1470 power switch IC. This IC allows software to power cycle a DUT or give it 3.3V/5V to Vdd. This feature only works on the in-house ADI iSensors FX3 Eval board. It does not function on the iSensor FX3 Eval board based on the Cypress Explorer kit. </p>

</div>
</div>
<a id="a4191f362f953cee5a7ad6170349760c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4191f362f953cee5a7ad6170349760c0">&#9670;&nbsp;</a></span>AdiSleepForMicroSeconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CyU3PReturnStatus_t AdiSleepForMicroSeconds </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numMicroSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function blocks thread execution for a specified number of microseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numMicroSeconds</td><td>The number of microseconds to stall for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A status code indicating the success of the function. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
